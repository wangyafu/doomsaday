# 游戏策划案：《末世模拟器：丧尸围城篇》

**Game Design Document (GDD)**

**版本号：** v2.0

**类型：** 文字冒险 / Roguelike / AI生存模拟

**平台：** H5网页（适配桌面端和移动端浏览器）

**核心体验：** 重生逆袭爽感 + 资源管理焦虑 + AI自由叙事 + 社交裂变炫耀

---

## 1. 游戏流程概述 (Game Loop)

游戏线性分为六个阶段：

1. **世界观选择**：确立背景（目前锁定"丧尸围城"）。后续可考虑加入极寒末世等。

2. **职业选择**：选择职业，获得不同的初始加成和隐藏特性。

3. **重生觉醒**：纯文字演出。交代前世惨死，重生回末世前3天，开启倒计时。

4. **物资筹备（囤货）**：【限时模式】核心策略点。在 **2分钟** 内完成资金 vs 空间 vs 情绪价值的博弈。

5. **生存模拟（天数循环）**：核心玩法。AI实时生成剧情与选项 -> 玩家决策（AI生成选项/自由输入）-> AI统一判定结果。

6. **结局结算**：生成社交分享卡片（必须包含"人设总结词" + 战绩），可投稿到末世档案库。

---

## 2. 详细系统设计

### 第一阶段：序幕 (The Hook)

**功能**：吸引注意力，快速进入。

**界面 (UI)**：
- 背景：动态黑白噪点或故障风（Glitch Art）
- 卡片式UI：展示三种末日，仅 **丧尸围城** 高亮可选，其余置灰（显示"信号丢失..."）

**交互**：点击后播放警报音效，屏幕泛红，跳转至职业选择页面。

---

### 第 1.5 阶段：职业选择 (Profession Select)

**功能**：选择职业，获得不同的初始加成和隐藏特性。

**职业列表**：

| 职业 | 图标 | 资金加成 | HP加成 | SAN加成 | 特性说明 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 普通白领 | 👔 | ±0 | ±0 | ±0 | 标准平衡型 |
| 退伍军人 | 🎖️ | -¥1,000 | +15 | ±0 | 战斗力强，解锁战术刀 |
| 程序员 | 💻 | +¥3,000 | -10 | -10 | 高薪但亚健康 |
| 运动员 | ⚽ | ±0 | +20 | ±0 | 体能极佳 |
| 心理咨询师 | 🧠 | ±0 | ±0 | +30 | 心理素质极强 |
| 销售经理 | 💼 | +¥1,000 | ±0 | -5 | 社交达人 |
| 生存狂 | 🏕️ | -¥500 | ±0 | ±0 | 末日论信徒，解锁专属物品 |
| 摇滚少女 | 🎸 | -¥500 | -10 | +30 | 社恐吉他手，特殊战斗方式 |
| 大学生 | 🎓 | -¥2,000 | ±0 | ±0 | 穷困潦倒，但运气buff |

**隐藏特性**：每个职业都有不展示给玩家的隐藏描述，用于影响AI的剧情生成和判定。

---

### 第二阶段：重生觉醒 (The Rebirth)

**功能**：交代剧情，通过"重生"设定赋予玩家囤货的合理性与爽感。

**界面 (UI)**：
- 全黑背景
- 白色像素字体，配合打字机音效（哒哒哒...）逐字出现

**文案演出 (Script Example)**：

```
（屏幕中央浮现）
"好痛……脖子被咬断了……"
"不想死……不想变成它们……"

（文字快速闪烁、崩坏，随后屏幕骤然变白，转为温馨的卧室背景音）

"你猛地从床上惊醒，冷汗浸透了睡衣。"
"窗外阳光明媚，楼下早餐摊的叫卖声依旧。"
"你颤抖着拿起手机，屏幕上显示的时间是——"

【末日爆发前 3 天】

"这一次，我绝不会再那样死去。"
```

**交互**：点击屏幕任意处，显示醒目红字："距离封城还有 2 分钟"，随后立即进入囤货页面并开始倒计时。

---

### 第三阶段：避难所与囤货 (Preparation) - 【限时机制】

**核心逻辑**：限时背包问题 (Time-Limited Knapsack Problem)。

#### 倒计时机制 (The Clock)

- 屏幕顶部中央显示巨大的红色倒计时：**02:00**（2分钟）
- 背景音乐：随着时间减少，秒针滴答声逐渐变快，最后10秒变成刺耳警报
- 时间结束后果：屏幕强制黑屏，提示"超市卷帘门已落下/全城断电"，强制携带当前购物车内物品进入生存阶段

**视觉风格**：采用"黑白钢笔/铅笔手绘风"。避难所和物品图片像生存日记上的速写草图。

#### 资源限制

- **初始资金**：¥6,500（根据职业会有加成/扣减）
- **初始空间**：由避难所决定

#### 步骤 1：选择避难所 (Shelter)

| 避难所 | 花费 | 空间 (格) | 防御 | 特性备注 |
| :--- | :--- | :--- | :--- | :--- |
| 出租屋 | ¥1,000 | 30 | ★ | 适合不想花钱的赌徒；人口密度高，易遭丧尸围堵 |
| 地下室 | ¥3,000 | 50 | ★★ | 压抑，易抑郁；有一定隔音效果 |
| 半山别墅 | ¥5,000 | 80 | ★★★ | 易招惹强盗；有游泳池可取水；2m高围栏 |

#### 步骤 2：物资超市 (Market)

**操作**：点击商品加入购物车。因为有时间限制，不设二次确认弹窗，点错只能去购物车删。

**物品分类设计 (手绘图标)**：

**生存必需品**：
- 压缩饼干（¥30, 1格）
- 桶装水（¥50, 2格）
- 罐头（¥35, 1格）
- 方便面（¥25, 1格）

**防御/战斗**：
- 棒球棍（¥50, 2格）
- 水果刀（¥40, 1格）
- 霰弹枪（¥4,000, 5格）
- 霰弹（¥100, 1格）

**医疗**：
- 绷带（¥30, 1格）
- 抗生素（¥200, 1格）
- 急救包（¥500, 2格）

**情绪价值**：
- 🐱 橘猫（¥500, 3格）
- 🎮 Switch游戏机（¥600, 2格）
- 🌶️ 老干妈（¥40, 1格）
- 📚 小说（¥30, 1格）
- 🚬 香烟（¥50, 1格）
- 🍷 红酒（¥150, 2格）

**支持者专属**：
- 🥇 信任罐头（¥30, 1格）- 来自开发者的馈赠

---

### 第四阶段：生存循环 (The Loop)

**核心机制**：每一天为一个 Turn。统一判定流。

#### 数值仪表盘 (HUD)

| 属性 | 图标 | 说明 |
| :--- | :--- | :--- |
| 生命 (HP) | ❤️ | 0-100+，归零死亡 |
| 理智 (SAN) | 🧠 | 0-100+，归零精神崩溃死亡 |

> **注意**：职业加成可能使初始值超过100

#### 每日统一流程 (Unified Daily Flow)

1. **后台资源结算**：系统根据拥有物品扣除物资（如每天自动消耗水/粮），更新基础状态。

2. **AI 场景生成 (Scenario Generation)**：
   - AI 根据当前天数、状态、物品，生成一段"生存日志"
   - AI 决定此日志是否包含危机/转折点
   - **无决策分支**：仅描述剧情（如"今天很平静，你吃了罐头看了一天漫画"），直接显示"进入下一天"按钮
   - **有决策分支**：描述危机（如"门外传来撬锁声"），并生成4个选项

3. **玩家决策 (Player Interaction)**：
   - 若为有决策分支，AI 实时生成 4 个建议选项：
     - A/B/C/D：AI 建议的操作
     - E 选项 (自由输入)：始终存在，玩家可输入任何策略

4. **AI 统一裁判 (Universal Adjudication)**：
   - 无论玩家选择了 AI 提供的选项，还是自己输入的内容，全部提交给 AI 进行后果判定
   - AI 判断：成功率（基于物品/数值）、消耗什么物资、造成什么后果
   - 输出结果文本，更新数值

5. **检查结束条件**：
   - HP ≤ 0：死亡，进入结局
   - SAN ≤ 0：精神崩溃，进入结局
   - 天数 > 20：通关，进入结局

---

### 第五阶段：结算与传播 (Viral & Share)

**触发条件**：HP <= 0（死亡）或 SAN <= 0（精神崩溃）或 存活天数 > 20（通关）

**视觉输出**：生成一张长图（Receipt 风格或档案袋风格）

**必须包含的核心元素**：

1. **人设总结词 (Identity Epithet)**：
   - 逻辑：必须给用户一个 3-6 字的词，作为整局游戏的"盖棺定论"
   - 设计意图：这是用户在社交媒体发帖时的核心文案素材
   - 示例："末日战神"、"作死小能手"、"铲屎官"、"倒霉蛋"

2. **毒舌评语**：50-100字的犀利点评

3. **存活天数 & 死因/结局**

4. **五维雷达图**：战斗力、生存力、智慧、运气、人性（各0-10分）

5. **高光时刻回放**：展示最精彩的一次判定（Judge评分≥90自动记录）

6. **末世档案投稿**：可填写昵称，将本局记录上传到公共档案库

---

## 3. 商业化系统

### 免费游玩限制
- 每日可免费游玩 **3次**
- 次数在北京时间每日0点重置

### 支持者系统
- 通过赞助成为当日支持者
- 支持者权益：
  - 当日无限制游玩
  - 解锁专属商品（信任罐头）
  - 首页显示金色"今日支持者"徽章
- 支持者身份每日重置

### 打赏点（暂不考虑实现）
- "时间暂停怀表"：支付 ¥1，囤货时间延长 60 秒
- "赞助空投"：开局多带物品

---

## 4. 末世档案系统

**功能**：展示所有玩家的游戏记录

**首页展示**：
- 显示最新的游戏档案
- 支持分页加载更多
- 点击可查看详情

**档案内容**：
- 玩家昵称
- 职业名称
- 存活天数
- 人设词
- 毒舌评语
- 五维雷达图

---

## 5. UI/UX 详细设计要求

| 页面 | 视觉关键词 | 交互重点 |
| :--- | :--- | :--- |
| 首页 | 故障风、黑色背景、红色强调 | 末世档案展示、开始/继续游戏 |
| 职业选择页 | 卡片式、职业图标突出 | 随机选择按钮、职业详情展示 |
| 重生页 | 纯黑背景、像素字 | 点击屏幕加速，打字机效果 |
| 囤货页 | 电商感、货架、手绘插图 | 倒计时压迫感，快速点击添加 |
| 主界面 | 极简、日记本风格 | 打字机效果，背景随SAN值变化 |
| 结算页 | 票据、复古档案 | 人设词醒目展示，分享功能 |

---

## 6. AI Prompt 架构

所有的prompt都要获取当前天数、玩家数值、物品清单、职业信息、避难所信息、过去5天故事作为上下文。

**Prompt A (Narrator/Storyteller)**：
- 职责：生成"今日日志" + 判断"是否需要决策" + 生成ABCD选项 + 无选项时更新数值
- 输出格式包含 `<options>` 和 `<state_update>` 标签

**Prompt B (Judge)**：
- 职责：接收玩家的选择，进行后果判定
- 输出结果文本 + 数值更新 + 行动评分(0-100)

**Prompt C (Ending)**：
- 职责：生成结局评价
- 输出死因分析、人设词、毒舌评语、五维雷达图

---

## 7. 技术栈

### 前端
- **框架**：Vue 3 (Composition API + `<script setup>`)
- **语言**：TypeScript
- **构建工具**：Vite 5
- **路由**：Vue Router 4
- **状态管理**：Pinia + pinia-plugin-persistedstate
- **样式**：Tailwind CSS
- **HTTP**：原生 fetch + SSE 流式传输
- **图片导出**：html2canvas

### 后端
- **框架**：FastAPI
- **语言**：Python 3.12+
- **数据验证**：Pydantic v2 + pydantic-settings
- **LLM 客户端**：OpenAI SDK（异步）
- **服务器**：Uvicorn

---

## 8. 版本更新记录

### v2.0 (2025-12-28)
- 新增职业系统，共9种职业可选
- 调整初始资金为 ¥6,500
- 调整囤货时间为 2 分钟
- 调整通关条件为存活 > 20 天
- 移除饱腹值(Hunger)属性，简化为 HP + SAN 双属性
- 调整避难所价格和空间
- 新增商业化系统（每日游玩次数限制、支持者系统）
- 新增末世档案系统
- 更新 UI/UX 设计规范

### v1.5 (初始版本)
- 基础游戏框架
- 重生觉醒 -> 囤货 -> 生存 -> 结算流程
- AI 驱动叙事系统